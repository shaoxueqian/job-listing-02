$(function(){"use strict";var e={},t={window:$(window),html:$("html"),body:$("body"),document:$(".l-document")},o={winW:window.innerWidth||t.window.width(),winH:window.innerHeight||t.window.height(),docW:t.document.outerWidth(),docH:t.document.outerHeight(),scrollT:0,scrollL:0,breakPoint:640,reiszeTimer:"",scrollTimer:""};e.checkScroll=function(){o.scrollT>100?t.body.addClass("js-status-scrolled"):t.body.removeClass("js-status-scrolled")},e.checkVisible=function(){var e=$(".js-action-visible");e.each(function(){if(($(this).offset().top<Math.ceil(.7*o.winH)+o.scrollT||o.winH+o.scrollT>=o.docH-50)&&($(this).removeClass("js-action-visible").addClass("js-status-visible"),$(this).hasClass("m-fude"))){var e=$(this);setTimeout(function(){e.addClass("js-status-visible-fude")},500)}})},e.headerToggle=function(){var e=$(".js-action-headertoggle");e.on("click",function(){t.body.toggleClass("js-status-headeropen")})},e.createInterviewList=function(){function e(e){for(var t,o,i=e.length;i;)o=Math.floor(Math.random()*i--),t=e[i],e[i]=e[o],e[o]=t;return e}var t=$(".js-action-interviewlist");t.each(function(){var t=$(this),o=t.data("category"),i=t.data("index"),s=[],l="";$.ajax({type:"GET",url:"../resource/js/list.json",dataType:"json"}).done(function(n){if(i)n.categoryList[o].some(function(e){n.personList.some(function(t){return e===t.id&&t.category===o?(s.push(t),!0):void 0})});else{var r=t.data("selfname"),a=n.categoryList[o].indexOf(r);n.categoryList[o].splice(a,1),e(n.categoryList[o]),n.categoryList[o].some(function(e,t){return n.personList.some(function(t){return e===t.id?(s.push(t),!0):void 0}),3===t?!0:void 0})}l+="<ul>",s.forEach(function(e){l+='<li class="p-interview_list_item p-interview_list_item-'+e.category+' js-action-visible"><a href="./'+e.id+'.html" class="m-btn-fude m-btn-fude-'+e.color+'"><div><h3>'+e.nameJP+"<span>"+e.nameEN+"</span></h3><h4>"+e.year+"<span>"+e.job+"</span></h4></div><p>"+e.message+'</p><figure><img src="./images/index-'+e.id+'.png" alt="" width="100%"><p><img src="./images/index-'+e.id+'-ov.png" alt="" width="100%"></p><div><i></i><i></i><i></i><i></i></div></figure></a></li>'}),l+="</ul>",t.html(l)}).fail(function(){})})},e.topSlide=function(){function e(){i=o>i+1?i+1:0,t.removeClass("js-status-visible js-status-visible-fude"),t.eq(i).addClass("js-status-visible"),setTimeout(function(){t.eq(i).addClass("js-status-visible-fude")},1e3)}var t=$(".p-top_main_bg_list"),o=t.length,i=-1;o&&(e(),setInterval(function(){e()},6e3))},e.hashScroll=function(){location.search&&setTimeout(function(){var e=$("#"+location.search.replace("?","")).offset().top-110;$("body,html").animate({scrollTop:e},700)},500)},e.scroll=function(){o.scrollT=t.window.scrollTop(),o.scrollL=t.window.scrollLeft(),o.docH=t.document.outerHeight(),e.checkScroll(),e.checkVisible()},e.resize=function(){o.winW=window.innerWidth||t.window.width(),o.winH=window.innerHeight||t.window.height(),o.docW=t.document.outerWidth(),o.docH=t.document.outerHeight()},e.headerToggle(),e.createInterviewList(),e.hashScroll(),e.topSlide(),t.window.load(function(){e.scroll(),e.checkVisible()}),t.window.resize("load",function(){o.resizeTimer!==!1&&clearTimeout(o.resizeTimer),o.resizeTimer=setTimeout(function(){e.resize()},200)}),t.window.on("scroll touchmove",function(){e.scroll()})});
